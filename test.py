import streamlit as st
import random

# ----------------------
# κ°λ… μ •λ¦¬ λ°μ΄ν„°
# ----------------------
concepts = {
    "μ²΄μ„Έν¬ λ¶„μ—΄ (Mitosis)": """
- λ©μ : μ„±μ¥, μ†μƒλ μ„Έν¬ νλ³µ, λ¬΄μ„±μƒμ‹
- κ³Όμ •: κ°„κΈ° β†’ μ „κΈ° β†’ μ¤‘κΈ° β†’ ν›„κΈ° β†’ λ§κΈ° β†’ μ„Έν¬μ§ λ¶„μ—΄
- κ²°κ³Ό: 2κ°μ λ”Έμ„Έν¬ (2n β†’ 2n)
- μ μ „μ  λ‹¤μ–‘μ„±: μ—†μ
    """,
    "κ°μ λ¶„μ—΄ (Meiosis)": """
- λ©μ : λ°°μ°μ(λ‚μ, μ •μ) ν•μ„±
- κ³Όμ •: 1μ°¨ κ°μλ¶„μ—΄ β†’ 2μ°¨ κ°μλ¶„μ—΄
- κ²°κ³Ό: 4κ°μ λ”Έμ„Έν¬ (2n β†’ n)
- μ μ „μ  λ‹¤μ–‘μ„±: μμ (κµμ°¨, λ…λ¦½μ  λ¶„λ¦¬)
    """,
    "μ²΄μ„Έν¬ λ¶„μ—΄ vs κ°μ λ¶„μ—΄ λΉ„κµ": """
| κµ¬λ¶„ | μ²΄μ„Έν¬ λ¶„μ—΄ | κ°μ λ¶„μ—΄ |
|------|-------------|-----------|
| λ©μ  | μ„±μ¥/μ¬μƒ | μƒμ‹μ„Έν¬ ν•μ„± |
| λ¶„μ—΄ νμ | 1ν | 2ν |
| λ”Έμ„Έν¬ μ | 2κ° | 4κ° |
| μ—Όμƒ‰μ²΄ μ | λ™μΌ (2n) | μ λ° (n) |
| μ μ „μ  λ‹¤μ–‘μ„± | μ—†μ | μμ |
    """
}

# ----------------------
# ν€΄μ¦ λ°μ΄ν„°
# ----------------------
quiz_data = [
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄μ κ²°κ³Ό, ν•λ‚μ λ¨μ„Έν¬(2n)μ—μ„ λ‡ κ°μ λ”Έμ„Έν¬κ°€ λ§λ“¤μ–΄μ§κΉ?",
     "options": ["1κ°", "2κ°", "4κ°", "8κ°"], "answer": "2κ°"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μ μ „μ  λ‹¤μ–‘μ„±μ΄ λ‚νƒ€λ‚λ” μ΄μ λ”?",
     "options": ["DNA λ³µμ ", "μ„Έν¬μ§ λ¶„μ—΄", "κµμ°¨μ™€ λ…λ¦½μ  λ¶„λ¦¬", "μ—Όμƒ‰μ²΄ μ μ μ§€"], "answer": "κµμ°¨μ™€ λ…λ¦½μ  λ¶„λ¦¬"},
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄κ³Ό κ°μλ¶„μ—΄ λ¨λ‘μ—μ„ κ³µν†µμ μΌλ΅ μΌμ–΄λ‚λ” ν„μƒμ€?",
     "options": ["DNA κµμ°¨", "μ¤‘κΈ°νμ— μ—Όμƒ‰μ²΄ λ°°μ—΄", "μ—Όμƒ‰μ²΄ μ κ°μ†", "λ°°μ°μ ν•μ„±"], "answer": "μ¤‘κΈ°νμ— μ—Όμƒ‰μ²΄ λ°°μ—΄"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μƒλ™μ—Όμƒ‰μ²΄κ°€ μ„λ΅ DNA μΌλ¶€λ¥Ό κµν™ν•λ” ν„μƒμ€?",
     "options": ["λ¶„λ¦¬", "κµμ°¨", "λ³µμ ", "λ…λ¦½ λ¶„λ¦¬"], "answer": "κµμ°¨"},
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄μ μµμΆ… κ²°κ³Ό, λ¨μ„Έν¬μ™€ λ”Έμ„Έν¬μ μ—Όμƒ‰μ²΄ μ κ΄€κ³„λ”?",
     "options": ["λ™μΌν•λ‹¤", "μ λ°μ΄λ‹¤", "λ°°λ΅ λμ–΄λ‚λ‹¤", "λ¶κ·μΉ™ν•λ‹¤"], "answer": "λ™μΌν•λ‹¤"}
]

# ----------------------
# Streamlit UI
# ----------------------
st.set_page_config(page_title="μƒλ…κ³Όν•™1 - μ μ „ ν•™μµ μ•±", layout="wide")
st.title("π§¬ μƒλ…κ³Όν•™1 - μ²΄μ„Έν¬ λ¶„μ—΄ & κ°μλ¶„μ—΄ ν•™μµ μ•±")

menu = st.sidebar.radio("λ©”λ‰΄ μ„ νƒ", ["κ°λ… μ •λ¦¬", "ν€΄μ¦ ν’€κΈ°"])

# ----------------------
# κ°λ… μ •λ¦¬ νμ΄μ§€
# ----------------------
if menu == "κ°λ… μ •λ¦¬":
    st.header("π“ μ²΄μ„Έν¬ λ¶„μ—΄κ³Ό κ°μλ¶„μ—΄ κ°λ… μ •λ¦¬")
    for title, desc in concepts.items():
        with st.expander(title):
            st.write(desc)
            # κ΄€λ ¨ κ·Έλ¦Ό λ³΄μ—¬μ£ΌκΈ°
            if "μ²΄μ„Έν¬" in title:
                st.image("images/mitosis.png", caption="μ²΄μ„Έν¬ λ¶„μ—΄ κ³Όμ •", use_container_width=True)
            elif "κ°μ" in title:
                st.image("images/meiosis.png", caption="κ°μ λ¶„μ—΄ κ³Όμ •", use_container_width=True)

# ----------------------
# ν€΄μ¦ νμ΄μ§€
# ----------------------
elif menu == "ν€΄μ¦ ν’€κΈ°":
    st.header("π“ ν€΄μ¦ λ„μ „!")

    selected_quizzes = random.sample(quiz_data, k=3)
    score = 0
    for i, quiz in enumerate(selected_quizzes):
        st.subheader(f"Q{i+1}. {quiz['question']}")
        user_answer = st.radio("μ •λ‹µμ„ μ„ νƒν•μ„Έμ”:", quiz["options"], key=f"q{i}")

        if st.button(f"μ •λ‹µ ν™•μΈ {i+1}", key=f"btn{i}"):
            if user_answer == quiz["answer"]:
                st.success("β… μ •λ‹µμ…λ‹λ‹¤! π‰")
                score += 1
            else:
                st.error(f"β ν‹€λ Έμµλ‹λ‹¤. μ •λ‹µμ€ π‘‰ {quiz['answer']}")

    st.info("π‘‰ ν€΄μ¦λ” λ§¤λ² μƒλ΅κ³ μΉ¨ν•λ©΄ λ‹¤λ¥Έ λ¬Έμ κ°€ λλ¤μΌλ΅ λ‚μµλ‹λ‹¤.")
