import streamlit as st
import random

# ----------------------
# π λ°°κ²½ μ„¤μ • (DNA μ΄λ―Έμ§€ + ν¬λ… λ°•μ¤ + μ΄λ΅ μ‚¬μ΄λ“λ°”)
# ----------------------
page_bg = """
<style>
.stApp {
    background-image: url("https://cdn.pixabay.com/photo/2016/11/19/14/00/dna-1838696_1280.jpg");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
}
.block-container {
    background-color: rgba(255, 255, 255, 0.88);
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0px 4px 15px rgba(0,0,0,0.25);
}
[data-testid="stSidebar"] {
    background: linear-gradient(180deg, #a5d6a7, #81c784, #66bb6a);
    color: white;
}
[data-testid="stSidebar"] * {
    color: white !important;
}
</style>
"""
st.markdown(page_bg, unsafe_allow_html=True)

# ----------------------
# ν€΄μ¦ λ°μ΄ν„° (30λ¬Έμ )
# ----------------------
quiz_data = [
    # ---- κΈ°λ³Έ κ°κ΄€μ‹ (20λ¬Έμ ) ----
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄μ κ²°κ³Ό, ν•λ‚μ λ¨μ„Έν¬(2n)μ—μ„ λ‡ κ°μ λ”Έμ„Έν¬κ°€ λ§λ“¤μ–΄μ§κΉ?",
     "options": ["1κ°", "2κ°", "4κ°", "8κ°"], "answer": "2κ°"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μ μ „μ  λ‹¤μ–‘μ„±μ΄ λ‚νƒ€λ‚λ” μ΄μ λ”?",
     "options": ["DNA λ³µμ ", "μ„Έν¬μ§ λ¶„μ—΄", "κµμ°¨μ™€ λ…λ¦½μ  λ¶„λ¦¬", "μ—Όμƒ‰μ²΄ μ μ μ§€"], "answer": "κµμ°¨μ™€ λ…λ¦½μ  λ¶„λ¦¬"},
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄κ³Ό κ°μλ¶„μ—΄ λ¨λ‘μ—μ„ κ³µν†µμ μΌλ΅ μΌμ–΄λ‚λ” ν„μƒμ€?",
     "options": ["DNA κµμ°¨", "μ¤‘κΈ°νμ— μ—Όμƒ‰μ²΄ λ°°μ—΄", "μ—Όμƒ‰μ²΄ μ κ°μ†", "λ°°μ°μ ν•μ„±"], "answer": "μ¤‘κΈ°νμ— μ—Όμƒ‰μ²΄ λ°°μ—΄"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μƒλ™μ—Όμƒ‰μ²΄κ°€ μ„λ΅ DNA μΌλ¶€λ¥Ό κµν™ν•λ” ν„μƒμ€?",
     "options": ["λ¶„λ¦¬", "κµμ°¨", "λ³µμ ", "λ…λ¦½ λ¶„λ¦¬"], "answer": "κµμ°¨"},
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄μ μµμΆ… κ²°κ³Ό, λ¨μ„Έν¬μ™€ λ”Έμ„Έν¬μ μ—Όμƒ‰μ²΄ μ κ΄€κ³„λ”?",
     "options": ["λ™μΌν•λ‹¤", "μ λ°μ΄λ‹¤", "λ°°λ΅ λμ–΄λ‚λ‹¤", "λ¶κ·μΉ™ν•λ‹¤"], "answer": "λ™μΌν•λ‹¤"},
    {"question": "κ°μλ¶„μ—΄μ€ λ‡ λ²μ μ—°μ†μ μΈ λ¶„μ—΄λ΅ μ΄λ£¨μ–΄μ Έ μλ”κ°€?",
     "options": ["1λ²", "2λ²", "3λ²", "4λ²"], "answer": "2λ²"},
    {"question": "DNA λ³µμ λ” μ„Έν¬ μ£ΌκΈ°μ μ–΄λ μ‹κΈ°μ— μΌμ–΄λ‚λ”κ°€?",
     "options": ["G1κΈ°", "SκΈ°", "G2κΈ°", "MκΈ°"], "answer": "SκΈ°"},
    {"question": "μ„Έν¬ μ£ΌκΈ° μ¤‘ μ„Έν¬ λ¶„μ—΄μ΄ μ‹¤μ λ΅ μΌμ–΄λ‚λ” μ‹κΈ°λ”?",
     "options": ["G1κΈ°", "SκΈ°", "G2κΈ°", "MκΈ°"], "answer": "MκΈ°"},
    {"question": "μ—Όμƒ‰μ²΄κ°€ κ°€μ¥ μ‘μ¶•λμ–΄ κ΄€μ°°ν•κΈ° μΆ‹μ€ μ‹κΈ°λ”?",
     "options": ["μ „κΈ°", "μ¤‘κΈ°", "ν›„κΈ°", "λ§κΈ°"], "answer": "μ¤‘κΈ°"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μ—Όμƒ‰μ²΄ μκ°€ μ λ°μΌλ΅ μ¤„μ–΄λ“λ” μ‹κΈ°λ”?",
     "options": ["κ°μ 1λ¶„μ—΄", "κ°μ 2λ¶„μ—΄", "μ²΄μ„Έν¬ λ¶„μ—΄", "κ°„κΈ°"], "answer": "κ°μ 1λ¶„μ—΄"},
    {"question": "μΈκ°„μ μ²΄μ„Έν¬ μ—Όμƒ‰μ²΄ μλ”?",
     "options": ["22κ°", "23κ°", "44κ°", "46κ°"], "answer": "46κ°"},
    {"question": "μΈκ°„μ μƒμ‹μ„Έν¬ μ—Όμƒ‰μ²΄ μλ”?",
     "options": ["22κ°", "23κ°", "44κ°", "46κ°"], "answer": "23κ°"},
    {"question": "κ°μλ¶„μ—΄μ κ²°κ³Ό λ‡ κ°μ λ”Έμ„Έν¬κ°€ λ§λ“¤μ–΄μ§€λ”κ°€?",
     "options": ["1κ°", "2κ°", "4κ°", "8κ°"], "answer": "4κ°"},
    {"question": "κµμ°¨λ” κ°μλ¶„μ—΄μ μ–΄λ μ‹κΈ°μ— μΌμ–΄λ‚λ”κ°€?",
     "options": ["μ „κΈ° I", "μ¤‘κΈ° I", "ν›„κΈ° I", "λ§κΈ° I"], "answer": "μ „κΈ° I"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μƒλ™μ—Όμƒ‰μ²΄κ°€ λ¶„λ¦¬λλ” μ‹κΈ°λ”?",
     "options": ["μ „κΈ° I", "μ¤‘κΈ° I", "ν›„κΈ° I", "λ§κΈ° I"], "answer": "ν›„κΈ° I"},
    {"question": "κ°μλ¶„μ—΄μ—μ„ μ—Όμƒ‰ λ¶„μ²΄κ°€ λ¶„λ¦¬λλ” μ‹κΈ°λ”?",
     "options": ["μ „κΈ° II", "μ¤‘κΈ° II", "ν›„κΈ° II", "λ§κΈ° II"], "answer": "ν›„κΈ° II"},
    {"question": "μ„Έν¬ λ¶„μ—΄ κ³Όμ •μ—μ„ λ°©μ¶”μ‚¬κ°€ ν•μ„±λλ” μ‹κΈ°λ”?",
     "options": ["μ „κΈ°", "μ¤‘κΈ°", "ν›„κΈ°", "λ§κΈ°"], "answer": "μ „κΈ°"},
    {"question": "μ„Έν¬ λ¶„μ—΄μ—μ„ ν•µλ§‰μ΄ λ‹¤μ‹ ν•μ„±λλ” μ‹κΈ°λ”?",
     "options": ["μ „κΈ°", "μ¤‘κΈ°", "ν›„κΈ°", "λ§κΈ°"], "answer": "λ§κΈ°"},
    {"question": "μ²΄μ„Έν¬ λ¶„μ—΄μ€ μ μ „μ μΌλ΅ μ–΄λ–¤ μ„Έν¬λ¥Ό λ§λ“λ”κ°€?",
     "options": ["λ™μΌν• μ„Έν¬", "λ‹¤μ–‘ν• μ„Έν¬", "μ—Όμƒ‰μ²΄ μκ°€ μ λ°μΈ μ„Έν¬", "λ¬΄μ‘μ„ μ„Έν¬"], "answer": "λ™μΌν• μ„Έν¬"},
    {"question": "κ°μλ¶„μ—΄μ€ μ£Όλ΅ μ–΄λ–¤ μ„Έν¬μ—μ„ μΌμ–΄λ‚λ”κ°€?",
     "options": ["μ²΄μ„Έν¬", "λ°°μ°μ ν•μ„± μ„Έν¬", "κ°„μ„Έν¬", "μ‹ κ²½μ„Έν¬"], "answer": "λ°°μ°μ ν•μ„± μ„Έν¬"},

    # ---- μμ„ λ°°μ—΄ λ¬Έμ  (10λ¬Έμ ) ----
    {"question": "λ‹¤μμ€ μ²΄μ„Έν¬ λ¶„μ—΄ κ³Όμ •μ—μ„ λ°μƒν•λ” μΌμ„ μμ„μ™€ μƒκ΄€μ—†μ΄ μ„¤λ…ν• κ²ƒμ΄λ‹¤. μ¬λ°”λ¥Έ μμ„λ¥Ό κ³ λ¥΄μ‹μ¤.\n\n"
                 "- A. ν•µλ§‰μ΄ μ‚¬λΌμ§€κ³  λ°©μ¶”μ‚¬κ°€ ν•μ„±λλ‹¤\n- B. μ—Όμƒ‰μ²΄κ°€ μ¤‘μ•™μ— λ°°μ—΄λλ‹¤\n- C. μ—Όμƒ‰ λ¶„μ²΄κ°€ μ–‘κ·ΉμΌλ΅ μ΄λ™ν•λ‹¤\n- D. μƒλ΅μ΄ ν•µλ§‰μ΄ ν•μ„±λκ³  μ„Έν¬μ§μ΄ λ¶„λ¦¬λλ‹¤",
     "options": ["A β†’ B β†’ C β†’ D", "B β†’ A β†’ C β†’ D", "C β†’ A β†’ B β†’ D", "D β†’ B β†’ A β†’ C"],
     "answer": "A β†’ B β†’ C β†’ D"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ I κ³Όμ •μ—μ„ λ°μƒν•λ” μΌμ„ μμ„μ™€ μƒκ΄€μ—†μ΄ μ„¤λ…ν• κ²ƒμ΄λ‹¤. μ¬λ°”λ¥Έ μμ„λ¥Ό κ³ λ¥΄μ‹μ¤.\n\n"
                 "- A. ν•µλ§‰μ΄ μ‚¬λΌμ§€κ³  λ°©μ¶”μ‚¬κ°€ ν•μ„±λλ‹¤\n- B. μƒλ™μ—Όμƒ‰μ²΄κ°€ μμ„ μ΄λ£¨μ–΄ λ°°μ—΄λλ‹¤\n- C. μƒλ™μ—Όμƒ‰μ²΄κ°€ λ¶„λ¦¬λμ–΄ μ–‘κ·ΉμΌλ΅ μ΄λ™ν•λ‹¤\n- D. μ„Έν¬μ§μ΄ λ¶„λ¦¬λμ–΄ λ‘ κ°μ μ„Έν¬κ°€ ν•μ„±λλ‹¤",
     "options": ["A β†’ B β†’ C β†’ D", "B β†’ A β†’ C β†’ D", "C β†’ B β†’ A β†’ D", "D β†’ C β†’ A β†’ B"],
     "answer": "A β†’ B β†’ C β†’ D"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ II κ³Όμ •μ—μ„ λ°μƒν•λ” μΌμ„ μμ„μ™€ μƒκ΄€μ—†μ΄ μ„¤λ…ν• κ²ƒμ΄λ‹¤. μ¬λ°”λ¥Έ μμ„λ¥Ό κ³ λ¥΄μ‹μ¤.\n\n"
                 "- A. ν•µλ§‰μ΄ μ‚¬λΌμ§€κ³  λ°©μ¶”μ‚¬κ°€ ν•μ„±λλ‹¤\n- B. μ—Όμƒ‰μ²΄κ°€ μ¤‘μ•™μ— λ°°μ—΄λλ‹¤\n- C. μ—Όμƒ‰ λ¶„μ²΄κ°€ λ¶„λ¦¬λμ–΄ μ–‘κ·ΉμΌλ΅ μ΄λ™ν•λ‹¤\n- D. μ„Έν¬μ§ λ¶„μ—΄λ΅ λ„¤ κ°μ λ”Έμ„Έν¬κ°€ ν•μ„±λλ‹¤",
     "options": ["A β†’ B β†’ C β†’ D", "B β†’ A β†’ C β†’ D", "C β†’ A β†’ B β†’ D", "D β†’ C β†’ B β†’ A"],
     "answer": "A β†’ B β†’ C β†’ D"},
    {"question": "λ‹¤μμ€ μ²΄μ„Έν¬ λ¶„μ—΄μ μ „κΈ°μ—μ„ μΌμ–΄λ‚λ” κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. μ—Όμƒ‰μ²΄κ°€ μ‘μ¶•λλ‹¤\n- B. ν•µλ§‰μ΄ μ‚¬λΌμ§„λ‹¤\n- C. λ°©μ¶”μ‚¬κ°€ ν•μ„±λλ‹¤",
     "options": ["A β†’ B β†’ C", "B β†’ A β†’ C", "C β†’ A β†’ B", "A β†’ C β†’ B"],
     "answer": "A β†’ B β†’ C"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ I μ¤‘κΈ°μ κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. λ°©μ¶”μ‚¬κ°€ ν•μ„±λλ‹¤\n- B. μƒλ™μ—Όμƒ‰μ²΄κ°€ μ„Έν¬ μ¤‘μ•™μ— λ°°μ—΄λλ‹¤",
     "options": ["A β†’ B", "B β†’ A"], "answer": "A β†’ B"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ I ν›„κΈ°μ κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. λ°©μ¶”μ‚¬κ°€ μμ¶•ν•λ‹¤\n- B. μƒλ™μ—Όμƒ‰μ²΄κ°€ μ–‘κ·ΉμΌλ΅ μ΄λ™ν•λ‹¤",
     "options": ["A β†’ B", "B β†’ A"], "answer": "A β†’ B"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ II ν›„κΈ°μ κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. λ°©μ¶”μ‚¬κ°€ μμ¶•ν•λ‹¤\n- B. μ—Όμƒ‰ λ¶„μ²΄κ°€ μ–‘κ·ΉμΌλ΅ μ΄λ™ν•λ‹¤",
     "options": ["A β†’ B", "B β†’ A"], "answer": "A β†’ B"},
    {"question": "λ‹¤μμ€ μ²΄μ„Έν¬ λ¶„μ—΄ λ§κΈ°μ κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. μ—Όμƒ‰μ²΄κ°€ ν’€λ¦°λ‹¤\n- B. ν•µλ§‰μ΄ λ‹¤μ‹ ν•μ„±λλ‹¤\n- C. μ„Έν¬μ§μ΄ λ¶„λ¦¬λλ‹¤",
     "options": ["A β†’ B β†’ C", "B β†’ A β†’ C", "C β†’ A β†’ B", "A β†’ C β†’ B"],
     "answer": "A β†’ B β†’ C"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ I λ§κΈ°μ κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. μ„Έν¬μ§ λ¶„μ—΄μ΄ μ‹μ‘λλ‹¤\n- B. λ‘ κ°μ μ„Έν¬κ°€ ν•μ„±λλ‹¤",
     "options": ["A β†’ B", "B β†’ A"], "answer": "A β†’ B"},
    {"question": "λ‹¤μμ€ κ°μλ¶„μ—΄ II λ§κΈ°μ κ³Όμ •μ„ μ¬λ°”λ¥Έ μμ„λ΅ λ°°μ—΄ν•μ‹μ¤.\n\n"
                 "- A. μ„Έν¬μ§ λ¶„μ—΄μ΄ μΌμ–΄λ‚λ‹¤\n- B. λ„¤ κ°μ λ”Έμ„Έν¬κ°€ ν•μ„±λλ‹¤",
     "options": ["A β†’ B", "B β†’ A"], "answer": "A β†’ B"},
]

# ----------------------
# μƒνƒ μ΄κΈ°ν™”
# ----------------------
if "quiz_list" not in st.session_state:
    st.session_state.quiz_list = []
if "current_q" not in st.session_state:
    st.session_state.current_q = 0
if "score" not in st.session_state:
    st.session_state.score = 0
if "answered" not in st.session_state:
    st.session_state.answered = False

# ----------------------
# μ‚¬μ΄λ“λ°” μ„¤μ •
# ----------------------
st.sidebar.title("β™οΈ μ„¤μ •")
num_questions = st.sidebar.slider("μ¶μ ν•  λ¬Έμ  μ μ„ νƒ", min_value=1, max_value=30, value=5)

if st.sidebar.button("ν€΄μ¦ μ‹μ‘ν•κΈ°"):
    st.session_state.quiz_list = random.sample(quiz_data, k=min(num_questions, len(quiz_data)))
    st.session_state.current_q = 0
    st.session_state.score = 0
    st.session_state.answered = False

# ----------------------
# λ©”μΈ ν€΄μ¦ UI
# ----------------------
if st.session_state.quiz_list:
    current_index = st.session_state.current_q
    if current_index < len(st.session_state.quiz_list):
        quiz = st.session_state.quiz_list[current_index]

        st.header(f"λ¬Έμ  {current_index+1} / {len(st.session_state.quiz_list)}")
        st.subheader(quiz["question"])

        user_answer = st.radio("μ •λ‹µμ„ μ„ νƒν•μ„Έμ”:", quiz["options"], key=f"q{current_index}")

        if not st.session_state.answered:
            if st.button("μ •λ‹µ ν™•μΈ"):
                st.session_state.answered = True
                if user_answer == quiz["answer"]:
                    st.success("β… μ •λ‹µμ…λ‹λ‹¤! π‰")
                    st.session_state.score += 1
                else:
                    st.error(f"β ν‹€λ Έμµλ‹λ‹¤. μ •λ‹µμ€ π‘‰ {quiz['answer']}")

        if st.session_state.answered:
            if st.button("λ‹¤μ λ¬Έμ λ΅ λ„μ–΄κ°€κΈ°"):
                st.session_state.current_q += 1
                st.session_state.answered = False
                st.rerun()
    else:
        st.success("π‰ λ¨λ“  λ¬Έμ λ¥Ό ν’€μ—μµλ‹λ‹¤!")
        st.info(f"β… μµμΆ… μ μ: {st.session_state.score} / {len(st.session_state.quiz_list)}")
